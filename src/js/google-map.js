//{"country":"ARGENTINA","latlng":[-38.416097,-63.616672],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Argentina.aspx","title":"Argentina"}
const countrylist = [{"country":"ALBANIA","latlng":[41.153332,20.168331],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Albania.aspx","title":"Albania"},{"country":"ARMENIA","latlng":[40.069099,45.038189],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Armenia.aspx","title":"Armenia"},{"country":"AUSTRIA","latlng":[47.516231,14.550072],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Austria.aspx","title":"Austria"},{"country":"AUSTRALIA","latlng":[-25.274398,133.775136],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Australia.aspx","title":"Australia"},{"country":"AZERBAIJAN","latlng":[40.143105,47.576927],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Azerbaijan.aspx","title":"Azerbaijan"},{"country":"BELGIUM","latlng":[50.503887,4.469936],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Belgium.aspx","title":"Belgium"},{"country":"BULGARIA","latlng":[42.733883,25.48583],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Bulgaria.aspx","title":"Bulgaria"},{"country":"BELARUS","latlng":[53.709807,27.953389],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Belarus.aspx","title":"Belarus"},{"country":"CANADA","latlng":[56.130366,-106.346771],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/North-America/Canada.aspx","title":"Canada"},{"country":"CHILE","latlng":[-35.675147,-71.542969],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Chile.aspx","title":"Chile"},{"country":"CHINA","latlng":[35.86166,104.195397],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/China.aspx","title":"China"},{"country":"COLOMBIA","latlng":[4.570868,-74.297333],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Colombia.aspx","title":"Colombia"},{"country":"COSTA RICA","latlng":[9.748917,-83.753428],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Costa-Rica.aspx","title":"Costa Rica"},{"country":"CYPRUS","latlng":[35.126413,33.429859],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Cyprus.aspx","title":"Cyprus"},{"country":"GERMANY","latlng":[51.165691,10.451526],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Germany.aspx","title":"Germany"},{"country":"DOMINICAN REPUBLIC","latlng":[18.735693,-70.162651],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Dominican-Republic.aspx","title":"Dominican Republic"},{"country":"ECUADOR","latlng":[-1.831239,-78.183406],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Ecuador.aspx","title":"Ecuador"},{"country":"ESTONIA","latlng":[58.595272,25.013607],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Estonia.aspx","title":"Estonia"},{"country":"SPAIN","latlng":[40.463667,-3.74922],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Spain.aspx","title":"Spain"},{"country":"FINLAND","latlng":[61.92411,25.748151],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Finland.aspx","title":"Finland"},{"country":"FRANCE","latlng":[46.227638,2.213749],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/France.aspx","title":"France"},{"country":"GEORGIA","latlng":[42.315407,43.356892],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Georgia.aspx","title":"Georgia"},{"country":"GREECE","latlng":[39.074208,21.824312],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Greece.aspx","title":"Greece"},{"country":"GUATEMALA","latlng":[15.783471,-90.230759],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Guatamala.aspx","title":"Guatemala"},{"country":"HONG KONG","latlng":[22.396428,114.109497],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Hong-Kong.aspx","title":"Hong Kong"},{"country":"HONDURAS","latlng":[15.199999,-86.241905],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Honduras.aspx","title":"Honduras"},{"country":"CROATIA","latlng":[45.1,15.2],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Croatia.aspx","title":"Croatia"},{"country":"HUNGARY","latlng":[47.162494,19.503304],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Hungray.aspx","title":"Hungary"},{"country":"INDONESIA","latlng":[-0.789275,113.921327],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Indonesia.aspx","title":"Indonesia"},{"country":"ISRAEL","latlng":[31.046051,34.851612],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Middle-East/Israel-DVDent-Ltd.aspx","title":"Israel"},{"country":"INDIA","latlng":[20.593684,78.96288],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/India.aspx","title":"India"},{"country":"ITALY","latlng":[41.87194,12.56738],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Italy.aspx","title":"Italy"},{"country":"JAPAN","latlng":[36.204824,138.252924],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Japan.aspx","title":"Japan"},{"country":"KYRGYZSTAN","latlng":[41.20438,74.766098],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Kyrgystan.aspx","title":"Kyrgyzstan"},{"country":"KOREA","latlng":[35.907757,127.766922],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Korea.aspx","title":"Korea"},{"country":"KAZAKHSTAN","latlng":[48.019573,66.923684],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Kazakhstan.aspx","title":"Kazakhstan"},{"country":"LITHUANIA","latlng":[55.169438,23.881275],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Lithuania.aspx","title":"Lithuania"},{"country":"LATVIA","latlng":[56.879635,24.603189],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Latvia.aspx","title":"Latvia"},{"country":"MACEDONIA","latlng":[41.608635,21.745275],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Macedonia.aspx","title":"Macedonia"},{"country":"MEXICO","latlng":[23.634501,-102.552784],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Mexico.aspx","title":"Mexico"},{"country":"MALAYSIA","latlng":[4.210484,101.975766],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Malaysia.aspx","title":"Malaysia"},{"country":"NICARAGUA","latlng":[12.865416,-85.207229],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Nicaragua.aspx","title":"Nicaragua"},{"country":"NETHERLANDS","latlng":[52.132633,5.291266],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Netherlands.aspx","title":"Netherlands"},{"country":"PANAMA","latlng":[8.537981,-80.782127],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Panama.aspx","title":"Panama"},{"country":"PERU","latlng":[-9.189967,-75.015152],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Peru.aspx","title":"Peru"},{"country":"PHILIPPINES","latlng":[12.879721,121.774017],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Phillipines.aspx","title":"Philippines"},{"country":"POLAND","latlng":[51.919438,19.145136],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Poland.aspx","title":"Poland"},{"country":"PORTUGAL","latlng":[39.399872,-8.224454],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Portugal.aspx","title":"Portugal"},{"country":"PARAGUAY","latlng":[-23.442503,-58.443832],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Paraguay.aspx","title":"Paraguay"},{"country":"ROMANIA","latlng":[45.943161,24.96676],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Romania.aspx","title":"Romania"},{"country":"SERBIA","latlng":[44.016521,21.005859],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/europe/Serbia.aspx","title":"Serbia"},{"country":"RUSSIA","latlng":[61.52401,105.318756],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/europe/Russia.aspx","title":"Russia"},{"country":"SWEDEN","latlng":[60.128161,18.643501],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/europe/Sweden.aspx","title":"Sweden"},{"country":"SINGAPORE","latlng":[1.352083,103.819836],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/asia/Singapore.aspx","title":"Singapore"},{"country":"EL SALVADOR","latlng":[13.794185,-88.89653],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/El-Salvador.aspx","title":"El Salvador"},{"country":"NAMIBIA","latlng":[	-22.95764, 18.49041],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Africa/Namibia.aspx","title":"Namibia"}, {"country":"KENYA","latlng":[ -0.023559,37.906193],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Africa/Kenya.aspx","title":"Kenya"}, {"country":"THAILAND","latlng":[15.870032,100.992541],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Thailand.aspx","title":"Thailand"},{"country":"TURKEY","latlng":[38.963745,35.243322],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Turkey.aspx","title":"Turkey"},{"country":"TAIWAN","latlng":[23.69781,120.960515],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Taiwan.aspx","title":"Taiwan"},{"country":"UKRAINE","latlng":[48.379433,31.16558],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Ukraine.aspx","title":"Ukraine"},{"country":"UNITED KINGDOM","latlng":[55.378051,-3.435973],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/UK.aspx","title":"United Kingdom"},{"country":"UNITED STATES","latlng":[37.09024,-95.712891],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/North-America/United-States.aspx","title":"United States"},{"country":"VENEZUELA","latlng":[6.42375,-66.58973],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Central-And-South-America/Venezuela.aspx","title":"Venezuela"},{"country":"VIETNAM","latlng":[14.058324,108.277199],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Asia/Vietnam.aspx","title":"Vietnam"},{"country":"KOSOVO","latlng":[42.602636,20.902977],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Europe/Kosovo.aspx","title":"Kosovo"},{"country":"SOUTH AFRICA","latlng":[-30.559482,22.937506],"link":"http://www.mis-implants.com/MIS-Info/ContactUs/Africa/SOUTH-AFRICA.aspx","title":"South Africa"}]

var markers = [],
    map,
    isMobile,
    isDesktop,
    isIE,
    mapHasBeenPinned = false;

export function initMap() {
    isMobile = window.screen.width<640;
    isDesktop = window.screen.width>1024;
    isIE = "ActiveXObject" in window;
    var latlng = new google.maps.LatLng(28,	0);
    var draggable = true;
    var myOptions = {
        zoom: isMobile ? 2 : 3,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        styles: [{
            "featureType": "water",
            "elementType": "geometry",
            "stylers": [{
                "color": "#e5e3df"
            }]
        }, {
            "featureType": "landscape",
            "elementType": "geometry",
            "stylers": [{
                "color": "#f5f5f5"
            }, {
                "lightness": 20
            }]
        }, {
            "featureType": "road.highway",
            "elementType": "geometry.fill",
            "stylers": [{
                "color": "#fff"
            }, {
                "lightness": 17
            }]
        }, {
            "featureType": "road.highway",
            "elementType": "geometry.stroke",
            "stylers": [{
                "color": "#fff"
            }, {
                "lightness": 29
            }, {
                "weight": 0.2
            }]
        }, {
            "featureType": "road.arterial",
            "elementType": "geometry",
            "stylers": [{
                "color": "#fff"
            }, {
                "lightness": 18
            }]
        }, {
            "featureType": "road.local",
            "elementType": "geometry",
            "stylers": [{
                "color": "#fff"
            }, {
                "lightness": 16
            }]
        }, {
            "featureType": "poi",
            "elementType": "geometry",
            "stylers": [{
                "color": "#f5f5f5"
            }, {
                "lightness": 21
            }]
        }, {
            "featureType": "poi.park",
            "elementType": "geometry",
            "stylers": [{
                "color": "#dedede"
            }, {
                "lightness": 21
            }]
        }, {
            "elementType": "labels.text.stroke",
            "stylers": [{
                "visibility": "on"
            }, {
                "color": "#fff"
            }, {
                "lightness": 16
            }]
        }, {
            "elementType": "labels.text.fill",
            "stylers": [{
                "saturation": 36
            }, {
                "color": "#333333"
            }, {
                "lightness": 40
            }]
        }, {
            "elementType": "labels.icon",
            "stylers": [{
                "visibility": "off"
            }]
        }, {
            "featureType": "transit",
            "elementType": "geometry",
            "stylers": [{
                "color": "#f2f2f2"
            }, {
                "lightness": 19
            }]
        }, {
            "featureType": "administrative",
            "elementType": "geometry.fill",
            "stylers": [{
                "color": "#fefefe"
            }, {
                "lightness": 20
            }]
        }, {
            "featureType": "administrative",
            "elementType": "geometry.stroke",
            "stylers": [{
                "color": "#fefefe"
            }, {
                "lightness": 17
            }, {
                "weight": 1.2
            }]
        }],
        draggable: draggable,
        zoomControl: true,
        mapTypeControl: false,
        streetViewControl: false,
        scrollwheel: false
    };
    map = new google.maps.Map(document.getElementById("google-map-area-57a583ea6e019"), myOptions);

    if (!isDesktop || isIE) {
        pinupMap();
    }
}
export function pinupMap() {
    if (!mapHasBeenPinned) {
        for (var i = 0; i < countrylist.length; i++) {
            addMarkerWithTimeout(countrylist[i], i * 50)
        }   
        mapHasBeenPinned = true;
    }
}


function addMarkerWithTimeout(country, timeout) {
    timeout = (isMobile || !window.chrome) ? 0 : timeout;
    window.setTimeout(function() {
        
        var marker_data = {
            position: new google.maps.LatLng(country.latlng[0],	country.latlng[1]),
            icon: { url: "dist/img/mis-pin.svg", scaledSize: new google.maps.Size(31, 29)},
            optimized: false,
            map: map,
            title: country.title,
        }
        if (!!window.chrome) {
            marker_data.animation = google.maps.Animation.DROP
        }
        let _event = isMobile ? 'dblclick' : 'click';
        markers.push(
            new google.maps.Marker(marker_data).addListener(_event, function() {
                window.open(country.link);
            })
        );
    }, timeout);
}